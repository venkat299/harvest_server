 {{> dependency}}
 <!-- plotly dependency for this page -->
<script type="text/javascript" src="/client_lib/plotly-latest.min.js"></script> 

 <!--  <div class="ui raised padded container segment"> -->

    <input hidden="true"  class="strategy_id" value={{strategy_id}}>
    <input hidden="true"  class="temp" >
    <table class="ui striped selectable collapsing small celled  table">
      <thead>

       <tr>
        <th colspan = "4">
         <h2 class="ui header dash_header">
          <!-- <i class="settings icon "></i> -->
          <img class="mini ui image" src="/client_img/wheat.svg">
          <div class="content ">
            Stocks : {{strategy_id}}
            <!--  <div class="sub header">_______</div> -->
          </div>
            
        </th>

        <th colspan="3">
          <div class="ui vertical left tiny  animated button link"  tabindex="0">
      <div class="visible  content left" > Signals</a></div>
      <div class="hidden content">
      <a href="/signal_log?strategy_id={{strategy_id}}"> <i class="icon list" ></i></a> 
      </div>
    </div>
        <div class="ui vertical left tiny  animated button link"  tabindex="0">
      <div class="visible  content left" >Orders </a></div>
      <div class="hidden content">
<a href="/order_log?strategy_id={{strategy_id}}"> <i class="icon list" ></i></a> 
      </div>
    </div>
       </th>
<th colspan="5"></th>
     <tr>
      <th colspan = "1">Symbol</th>
<!--       <th colspan = "3">
        <div class="ui fluid stackable menu">
          <a class="item active">
            Stock ceil %
          </a>

          <a class="item active">
            Net ror %
          </a>

          <a class="item active">
            Profit margin %
          </a>
        </div>


      </th> -->
      <th colspan = "1">Stock ceil %</th>
  <th colspan = "1"> Net ror %</th>
  <th colspan = "1">Profit margin %</th>
  <!-- <th colspan = "1">nrr</th>
  <th colspan = "1">profit margin</th> -->
  <th colspan = "1">buy price threshold</th>
  <th colspan = "1">prev buy price</th>
  <th colspan = "1">prev sell price</th>
    <th colspan = "1">Signal status</th>
  <th colspan = "1">Order status</th>
    <th colspan = "1">Trade</th>
  <th colspan = "1">Qty</th>
   <th colspan = "1">Close</th>
  <!--   <th>Routine</th> -->
</tr>
</thead>
<tbody>
  {{#data}}
  <tr id="{{tradingsymbol}}" >
   <td colspan="1">
    <div class="ui vertical left tiny fluid animated button link show_chart"  tabindex="0">
      <div class="visible  content left" > {{tradingsymbol}}</a></div>
      <div class="hidden content">
        <i class="icon save" ></i>
      </div>
    </div>
  </td>
<!--   <td colspan = "3">
   <form class="ui form small"   autocomplete="off">
    <div class="three fields">
      <div class="field ">
       <input type="text" name="first-name" class="round_num" value="{{stock_ceil}}">
     </div>
     <div class="field ">
      <input type="text" name="last-name" class="round_num"  value="{{nrr}}">
    </div>
    <div class="field">
      <input type="text" name="last-name" class="round_num"  value="{{profit_margin}}">
    </div>
  </div>
</form>
</td> -->
<td colspan = "1" class="round_num">{{stock_ceil}}</td>
<td colspan = "1" class="round_num" >{{nrr}}</td>
<td colspan = "1" class="round_num">{{profit_margin}}</td>
<!-- <td>{{stock_ceil}}</td>
<td>{{nrr}}</td>
<td>{{profit_margin}}</td> -->
<td colspan = "1">{{buy_price_threshold}}</td>
<td colspan = "1">{{prev_buy_price}}</td>
<td colspan = "1">{{prev_sell_price}}</td>
<td colspan = "1">{{signal_log.signal_status}}</td>
<td colspan = "1">{{order_log.status}}</td>
<td colspan = "1">{{order_log.order_obj.transaction_type}}</td>
<td colspan = "1">{{order_log.order_obj.quantity}}</td>
<td colspan = "1">{{close}}</td>




</tr>
{{/data}}
</tbody>
</table>
<!-- modal for displaying chart -->
<div id="modal">
  <div class="ui basic modal">
  <i class="close icon"></i>
  <div class="header">More info
  </div>
  <div id="tester">

  </div>
<!--   <div class="actions">
    <div class="two fluid ui inverted buttons">
      <div class="ui cancel red basic inverted button">
        <i class="remove icon"></i>
        No
      </div>
      <div class="ui ok green basic inverted button">
        <i class="checkmark icon"></i>
        Yes
      </div>
    </div>
  </div> -->
</div>
</div>
</body>
<script type="text/javascript">
  $(function(){
  // convert unix date to readable date
  // $('.format_time').each(function(){
  //   $(this).text((new Date(+($(this).text()))).toString().substr(0,11))
  // });
  $('.round_num').each(function(){
    $(this).text( parseFloat(+($(this).text()),3).toFixed(3) )
  });  
    $('.format_time').each(function(){
    $(this).text(timeSince(new Date(+($(this).text()))))
  });

})
  $(document).on("click", ".show_chart", function () {
          TESTER = document.getElementById('tester');
  Plotly.plot( TESTER, [{
  x: [1, 2, 3, 4, 5],
  y: [1, 2, 4, 8, 16] }], {
  margin: { t: 0 } } );
    $(".ui.modal").modal("show");
})

</script>
